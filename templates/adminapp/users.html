{% extends 'adminapp/base.html' %}

{% block navbar_title %}Users Management{% endblock %}

{% block navbar_search %}
<form method="GET" style="display: flex; gap: 8px;">
    <input type="text" name="search" class="navbar-search" placeholder="Search by username or email..." value="{{ search_query }}">
    <button type="submit" style="background: #7c3aed; border: none; padding: 8px 16px; border-radius: 20px; color: #fff; cursor: pointer;">Search</button>
</form>
{% endblock %}

{% block content %}
<div class="table-container">
    <div class="table-header">
        <div class="table-title">All Users ({{ users.count }})</div>
        <div class="table-actions">
            <a href="{% url 'admin_dashboard' %}" class="btn-secondary btn-sm">
                <i class="fas fa-arrow-left"></i> Back
            </a>
        </div>
    </div>
    <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Full Name</th>
                <th>Phone</th>
                <th>Joined</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>
                    <strong>{{ user.username }}</strong>
                </td>
                <td>{{ user.email }}</td>
                <td>{{ user.get_full_name|default:"-" }}</td>
                <td>
                    {% if user.profile.phone %}
                        {{ user.profile.phone }}
                    {% else %}
                        <span style="color: #707070;">-</span>
                    {% endif %}
                </td>
                <td>{{ user.date_joined|date:"d M, Y" }}</td>
                <td>
                    {% if user.is_active %}
                        <span class="status-badge delivered">
                            <i class="fas fa-check-circle"></i> Active
                        </span>
                    {% else %}
                        <span class="status-badge cancelled">
                            <i class="fas fa-times-circle"></i> Inactive
                        </span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align: center; color: #707070; padding: 40px;">
                    <i class="fas fa-search" style="font-size: 32px; margin-bottom: 16px; opacity: 0.5;"></i>
                    <p>No users found</p>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- STATS -->
{% if users %}
<div style="background: linear-gradient(135deg, #1a1f3a 0%, #16213e 100%); border: 1px solid #2d3561; border-radius: 12px; padding: 20px; margin-top: 20px; text-align: center;">
    <p style="font-size: 14px; color: #a0a0a0;">Showing {{ users.count }} user(s)</p>
</div>
{% endif %}

{% endblock %}
